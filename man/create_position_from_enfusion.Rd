% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/from_enfusion.R
\name{create_position_from_enfusion}
\alias{create_position_from_enfusion}
\title{Create a Position from Enfusion Data}
\usage{
create_position_from_enfusion(x, portfolio_short_name)
}
\arguments{
\item{x}{A named list or data frame containing the input data. Expected fields include:
- `"Instrument Type"`: The type of financial instrument (e.g., "Bond", "Listed Option", "Equity").
- `"FIGI"`: The Financial Instrument Global Identifier (used for bonds).
- `"BB Yellow Key Position"`: Bloomberg Yellow Key Position (used for listed options and equities).
- `"Description"`: A fallback description for other instrument types.
- `"Option Quantity"`: The quantity of options (used for listed options).
- `"Stock Quantity"`: The quantity of stocks (used for equities and other instruments).
- `"Is Financed"`: A logical value indicating whether the position is financed.}

\item{portfolio_short_name}{A string representing the short name of the portfolio.}
}
\value{
A position object created using the `position()` function.
}
\description{
This function generates a position object based on input data from Enfusion.
}
\details{
The function determines the `id` of the security based on the instrument type:
- For bonds, it retrieves the Bloomberg ID using the `Rblpapi::bdp()` function.
- For listed options and equities, it uses the Bloomberg Yellow Key Position.
- For other instrument types, it defaults to the `Description` field.

The quantity (`qty`) is determined based on the instrument type:
- For listed options, it uses the `"Option Quantity"` field.
- For other instruments, it uses the `"Stock Quantity"` field.

The `swap` parameter is set based on the `"Is Financed"` field.
}
\examples{
# Example usage:
data <- list(
  "Instrument Type" = "Equity",
  "BB Yellow Key Position" = "AAPL US Equity",
  "Stock Quantity" = "100",
  "Is Financed" = FALSE
)
create_position_from_enfusion(data, "Portfolio1", 1000000)
}
